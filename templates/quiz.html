<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Form</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
</head>
<body>
    <div class="header"> <!-- Defines a header section -->
        <div class="header__logo">
            <img src="{{ url_for('static', filename='svg/moon3.svg') }}" alt="Logo" class="logo"> <!-- Logo image -->
        </div>
        <nav class="navbar"> <!-- Navigation bar -->
            <ul class="navbar__menu"> <!-- Unordered list for menu items -->
                <li class="navbar__item">
                    <a href="{{ url_for('index') }}" class="navbar__link"><span>Home</span></a> <!-- Home link -->
                </li>
                <li class="navbar__item">
                    <a href="{{ url_for('about') }}" class="navbar__link"><span>About</span></a> <!-- About link -->
                </li>
                <li class="navbar__item">
                    <a href="mailto:decodeyourclockgene@gmail.com" class="navbar__link"><span>Contact</span></a> <!-- Contact link -->
                </li>
            </ul>
        </nav>
    </div>
    <form id="quizForm" class="mt-4" action="/submit" method="post">
        <!-- Personal Details Section -->
        <div id="personalDetails">
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" class="form-control" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="age">Age:</label>
                <input type="number" class="form-control" id="age" name="age" required>
           </div>
            <div class="form-group">
                <label for="gender">Gender:</label>
                <select class="form-control" id="gender" name="gender">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label for="number">Number:</label>
                <input type="text" class="form-control" id="number" name="number" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" class="form-control" id="email" name="email" required>
            </div>

            <button type="button" class="btn btn-primary" onclick="showQuestions()">Next</button>
        </div>

        <!-- Questions Section -->
        <div id="quizQuestions" style="display: none;">
            <div class="form-group">
                <label for="question1">Question 1: Considering only your own “feeling best” rhythm, at what time would you get up if you were entirely free to plan your day?</label><br>
                <select class="form-control" id="question1" name="question1" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">5:00 am to 6:30 am</option>
                    <option value="2">6:30 am to 7:45 am</option>
                    <option value="3">7:45am to 9:45 am</option>
                    <option value="4">9:45 am to 11:00 am</option>
                    <option value="5">11:00am to 12:00 noon</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question2">Question 2: Considering only your own “feeling best” rhythm, at what time would you go to bed if you were entirely free to plan your evening?</label><br>
                <select class="form-control" id="question2" name="question2" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">8:00 pm to 9:00 pm</option>
                    <option value="2">9:00 pm to 10:15 pm</option>
                    <option value="3">10:15 pm to 12:30 am</option>
                    <option value="4">12:30 am to 1:45 am</option>
                    <option value="5">1:45 am to 3:00 am</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question3">Question 3: If there is a specific time at which you have to get up in the morning, to what extent are you dependent on being woken up by an alarm clock?</label><br>
                <select class="form-control" id="question3" name="question3" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">Not at all dependent</option>
                    <option value="2">Slightly dependent</option>
                    <option value="3">Fairly dependent</option>
                    <option value="4">Very dependent</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question4">Question 4: Assuming adequate environmental conditions, how easy do you find getting up in the mornings?</label><br>
                <select class="form-control" id="question4" name="question4" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">Very difficult</option>
                    <option value="2">Difficult</option>
                    <option value="3">Fairly easy</option>
                    <option value="4">Very easy</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question5">Question 5: How alert do you feel during the first half-hour after having woken in the mornings?</label><br>
                <select class="form-control" id="question5" name="question5" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">Not at all alert</option>
                    <option value="2">Slightly alert</option>
                    <option value="3">Fairly alert</option>
                    <option value="4">Very alert</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question6">Question 6: How is your appetite during the first half-hour after having woken in the mornings?</label><br>
                <select class="form-control" id="question6" name="question6" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">Very poor</option>
                    <option value="2">Fairly poor</option>
                    <option value="3">Fairly good</option>
                    <option value="4">Very good</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question7">Question 7: During the first half-hour after having woken in the morning, how tired do you feel?</label><br>
                <select class="form-control" id="question7" name="question7" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">Very tired</option>
                    <option value="2">Fairly tired</option>
                    <option value="3">Fairly refreshed</option>
                    <option value="4">Very refreshed</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question8">Question 8: When you have no commitments the next day, at what time do you go to bed compared to your usual bedtime?</label><br>
                <select class="form-control" id="question8" name="question8" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">Seldom or never later</option>
                    <option value="2">Less than one hour later</option>
                    <option value="3">1-2 hours later</option>
                   <option value="4">More than two hours later</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question9">Question 9: You have decided to engage in some physical exercise. A friend suggests that you do this one hour twice a week and the best time for him is between 7:00-8:00 a.m. Bearing in mind nothing else but your own “feeling best” rhythm, how do you think you would perform?</label><br>
                <select class="form-control" id="question9" name="question9" required onchange="calculateSum()">
                    <option id="defaultOption" selected disabled value="">Select an option</option>
                    <option value="1">Would be on good form</option>
                    <option value="2">Would be on reasonable form</option>
                    <option value="3">Would find it difficult</option>
                    <option value="4">Would find it very difficult</option>
                </select>
            </div>
            <div class="form-group">
              <label for="question10">Question 10: At what time of the evening do you feel tired and as a result in need of sleep?</label><br>
                <select class="form-control" id="question10" name="question10" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">8:00 pm to 9:00 pm</option>
                    <option value="2">9:00 pm to 10:00 pm</option>
                    <option value="3">10:00 pm to 1:00 am</option>
                    <option value="4">1:00 am to 2:00 am</option>
                    <option value="5">2:00 am to 3:00 am</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question11">Question 11: You wish to be at your peak performance for a test which you know is going to be mentally exhausting and lasting for two hours. You are entirely free to plan your day and considering only your own “feeling best” rhythm, which ONE of the four testing times would you choose?</label><br>
                <select class="form-control" id="question11" name="question11" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">8:00 am to 10:00 am</option>
                    <option value="2">11:00 am to 1:00 pm</option>
                    <option value="3">3:00 pm to 5:00 pm</option>
                    <option value="4">7:00 am to 9:00 pm</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question12">Question 12: If you went to bed at 11:00 pm at what level of tiredness would you be?</label><br>
                <select class="form-control" id="question12" name="question12" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">Not at all tired</option>
                    <option value="2">A little tired</option>
                    <option value="3">Fairly tired</option>
                    <option value="4">Very tired</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question13">Question 13: For some reason you have gone to bed several hours later than usual, but there is no need to get up at any particular time the next morning. Which ONE of the following events are you most likely to experience?</label><br>
                <select class="form-control" id="question13" name="question13" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">Will wake up at usual time and will NOT fall asleep</option>
                    <option value="2">Will wake upat usual time and will doze thereafter</option>
                    <option value="3">Will wake up at usual time but will fall asleep again</option>
                    <option value="4">Will NOT wake up until later than usual</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question14">Question 14: One night you have to remain awake between 4:00 am-6:00 am in order to carry out a night watch. You have no commitments the next day. Which ONE of the alternatives will suit you best?</label><br>
                <select class="form-control" id="question14" name="question14" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">Would NOT go to bed until watch was over</option>
                    <option value="2">Would take a nap beforeand sleep after</option>
                    <option value="3">Would take a good sleep before and nap after</option>
                    <option value="4">Would take ALL sleep before watch</option>
                </select>
            </div>
            <div class="form-group">
                <label for="question15">Question 15: You have to do two hours of hard physical work. You are entirely free to plan your day considering only your own “feeling best” rhythm. Which ONE of the following times would you choose?</label><br>
                <select class="form-control" id="question15" name="question15" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">8:00 am to 10:00 am</option>
                    <option value="2">11:00 am to 1:00 pm</option>
                    <option value="3">3:00 pm to 5:00 pm</option>
                    <option value="4">7:00 pm to 9:00 pm</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question16">Question 16: You have decided to engage in hard physical exercise. A friend suggests that you do this for one hour twice a week and the best time for him is between 10:00 pm-11:00 pm. Bearing in mind nothing else but your own “feeling best” rhythm, how well do you think you would perform?</label><br>
                <select class="form-control" id="question16" name="question16" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option><option value="1">Would be on good form</option>
                    <option value="2">Would be on reasonable form</option>
                    <option value="3">Would find it difficult</option>
                    <option value="4">Would find it very difficult</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question17">Question 17: Suppose that you can choose your own work hours. Assume that you worked a FIVE hour day (including breaks) and that your job was interesting and paid by results. Which FIVE CONSECUTIVE HOURS would you select?</label><br>
                <select class="form-control" id="question17" name="question17" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">Five hours starting between 12:00 am and 3:00 am</option>
                    <option value="2">Five hours starting between 3:00 am and 7:00 am</option>
                    <option value="3">Five hours starting between 7:00 am and 9:00 am</option>
                    <option value="4">Five hours starting between 9:00 am and 1:00 pm</option>
                    <option value="5">Five hours starting between 1:00 pm and 4:00 pm</option>
                    <option value="6">Five hours starting between 5:00 pm and 12:00 am</option>
</select>
            </div>

            <div class="form-group">
                <label for="question18">Question 18: At what time of the day do you think that you reach your 'feeling best' peak?</label><br>
                <select class="form-control" id="question18" name="question18" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">12:00 am to 3:00 am</option>
                    <option value="2">3:00 am to 6:00 am</option>
                    <option value="3">6:00 am to 9:00 am</option>
                    <option value="4">9:00 am to 12:00 pm</option>
                    <option value="5">12:00 pm to 3:00 pm</option>
                    <option value="6">3:00 pm to 6:00 pm</option>
                    <option value="7">6:00 pm to 9:00 pm</option>
                    <option value="8">9:00 pm to 12:00 am</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question19">Question 19: At what time of the day do you think that you reach your 'feeling least' peak?</label><br>
                <select class="form-control" id="question19" name="question19" required onchange="calculateSum()">
                    <option selected disabled value="">Select an option</option>
                    <option value="1">12:00 am to 3:00 am</option>
                    <option value="2">3:00 am to 6:00 am</option>
                    <option value="3">6:00 am to 9:00 am</option>
                    <option value="4">9:00 am to 12:00 pm</option>
                    <option value="5">12:00 pm to 3:00 pm</option>
                    <option value="6">3:00 pm to 6:00 pm</option>
                    <option value="7">6:00 pm to 9:00 pm</option>
                    <option value="8">9:00 pm to 12:00 am</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
            <button type="button" class="btn btn-primary" onclick="showPersonalDetails()">Back</button>
        </div>
    </form>

    <div id="sum" style="display: none;"></div>

    <script>
       
       let sum = 0;

        function calculateSum() {
            const selectedElement = event.target;
            const selectedValue = parseInt(selectedElement.value);
            const previousValue = parseInt(selectedElement.getAttribute('data-previous-value') || 0);

            if (!isNaN(selectedValue)) {
                if (selectedValue > previousValue) {
                    sum += selectedValue - previousValue;
                } else if (selectedValue < previousValue) {
                    sum -= previousValue - selectedValue;
                }
                selectedElement.setAttribute('data-previous-value', selectedValue);
            }

            // Store the sum in a cookie
            document.cookie = `sum=${sum}; path=/`;
        }


        document.addEventListener('DOMContentLoaded', function() {
            // Prevent form submission on Enter key press
            var quizForm = document.getElementById('quizForm');
            quizForm.addEventListener('keydown', function(e) {
                if (e.keyCode === 13) {
                    e.preventDefault();
                }
            });

            // Attach event listeners for showing sections
            var btnNext = document.querySelector('.btn-next');
            var btnBack = document.querySelector('.btn-back');
            btnNext.addEventListener('click', showQuestions);
            btnBack.addEventListener('click', showPersonalDetails);

            // Attach event listener for form submission
            quizForm.addEventListener('submit', function(e) {
                if (!validateForm()) {
                    e.preventDefault(); // Prevent form submission if validation fails
                } else {
                    // Store the sum in a cookie when the form is submitted
                    document.cookie = `sum=${sum}; path=/`;
                }
            });
        });

        function showQuestions() {
            if (validatePersonalDetails()) {
                document.getElementById('personalDetails').style.display = 'none';
                document.getElementById('quizQuestions').style.display = 'block';
            }
        }

        function showPersonalDetails() {
            document.getElementById('quizQuestions').style.display = 'none';
            document.getElementById('personalDetails').style.display = 'block';
        }

        function validateForm() {
            var selects = document.querySelectorAll('#quizQuestions select');
            for (var i = 0; i < selects.length; i++) {
                if (selects[i].value === '') {
                    alert('Please answer all questions before submitting.');
                    return false;
                }
            }
            return true;
        }

        function validatePersonalDetails() {
            const name = document.getElementById("name").value.trim();
            const age = document.getElementById("age").value.trim();
            const gender = document.getElementById("gender").value.trim();
            const number = document.getElementById("number").value.trim();
            const email = document.getElementById("email").value.trim();

            if (name === "" || age === "" || gender === "" || number === "" || email === "") {
                alert("Please fill in all the required fields in the Personal Details section before proceeding.");
                return false;
            }

            return true;
        }
    </script>

</body>
</html>